## Real-Time Time Series Prediction Pipeline

Этот проект реализует потоковую архитектуру для предсказания следующих значений временного ряда в режиме реального времени с использованием модели LSTM, дообучаемой с помощью Online SGD.

### Архитектура

Система состоит из трёх основных компонентов:
1. PostgreSQL → Kafka
   С помощью коннектора debezium постоянно считываются новые данные из таблицы PostgreSQL и публикуются в Kafka-топик.


2. Kafka Consumer → REST API Forwarder
   Kafka читает сообщения из топика и пересылает их по REST API в модельный сервис.

3. Модельный сервис (Python)
   REST-сервис, реализующий предсказание следующего значения временного ряда с помощью LSTM-модели, дообучаемой в онлайне с помощью стохастического градиентного спуска (Online SGD).


### Применение

Проект может использоваться для:

- мониторинга временных рядов в реальном времени (например, телеметрии, логов, цен),
- предсказания будущих значений с возможностью дообучения модели на лету,
- выявления аномалий на основе прогноза и фактических значений.

### Технологии
- PostgreSQL — источник данных
- Apache Kafka — транспортный слой для потоков
- Python (Flask) — REST API модельного сервиса
- PyTorch — реализация LSTM и online SGD
- Debezium — обеспечивает CDC
- Docker — подключение вспомогательных сервисов
- Java Spring (Java 17) — основное web-приложение

### Быстрый старт
1. Запуск Kafka и PostgreSQL (Docker Compose)
   `docker-compose up -d`
2. Запуск Spring Boot приложения
   `git clone https://github.com/ArseniyKichkin/spring-ml.git
    cd spring-ml`

    #### Собрать jar-файл
    `./mvnw package`

    #### Запустить
    `java -jar <путь_до_собранного_архива>`
    
    #### Запустить стриминг данных
    `curl -X POST http://localhost:8081/api/stream/start`
    

### Конфигурация
Все параметры (подключение к БД, Kafka, адрес REST API) задаются через .env файл.

Данные, вставляемые в таблицу Postgres, будут автоматически обрабатываться. Также можно самому отправлять POST-запросы так:

`curl -s -X POST http://localhost:5000/predict \
  -H "Content-Type: application/json" \
  -d '{"created_at": 1715378912345678, "salary": 82}'
`
Данные имеют структуры временного ряда, поэтому переменная `created_at` означает время, а `salary` — значение временного ряда.

